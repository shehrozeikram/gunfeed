<!DOCTYPE html>
<html>
  <head>
    <title>Gunfeed</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.min.css" rel="stylesheet"/>

  </head>

  <body>

  <% if notice %>
    <p class="alert alert-success"><%= notice %></p>
  <% end %>
  <% if alert %>
    <p class="alert alert-danger"><%= alert %></p>
  <% end %>
    <%= yield %>
  </body>

<script>

  // notify me modal
    (function(){

        //. (i) Declare UI Selectors
        const model_overlay = document.querySelector('.model-overlay-app');
        const model_app = document.querySelector('.app-model');
        const reportModel_overlay = document.querySelector('.model-overlay-product');
        const reportModel_app = document.querySelector('.app-model-product')
        const removeModelCTRL = document.querySelector('.remove-model-app');
        const removeModelReport = document.querySelector('.remove-report-model');

        model_overlay.setAttribute('style', `opacity: 0; visibility: hidden;`);
        reportModel_overlay.setAttribute('style', `opacity: 0; visibility: hidden;`);

        //... Start Model Controller
        const modelDisplayUI = {
            displayUIModel: `visibility: visible; transition: all .4s ease-in-out;  opacity: 1`
        };
        const removeModel = {
            removeUIModel: `visibility: hidden; transition: all .4s ease-in-out;  opacity: 0`
        };
        //... End Model Controller

        //. (M-I) Add Event Listener on Click ( Model Notify Me)
        document.querySelector('.notify-me-modal').addEventListener('click', (event) => {

            //. (iv) Display the Model Overlay and Content after Click
            model_overlay.setAttribute('style', modelDisplayUI.displayUIModel);

            event.preventDefault();
            return true;
        });



        removeModelCTRL.addEventListener('click', (event) => {
            model_overlay.setAttribute('style', removeModel.removeUIModel);
            reportModel_overlay.setAttribute('style', removeModel.removeUIModel);
            event.preventDefault();
            return true;
        });
        removeModelReport.addEventListener('click', (event) => {
            model_overlay.setAttribute('style', removeModel.removeUIModel);
            reportModel_overlay.setAttribute('style', removeModel.removeUIModel);
            event.preventDefault();
            return true;
        });

        //. Report Model
        document.querySelector('.report-product').addEventListener('click', (event) => {
            reportModel_overlay.setAttribute('style', modelDisplayUI.displayUIModel);

            event.preventDefault();
            return true;
        });
    })();
</script>

</html>
